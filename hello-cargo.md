# Hello,Cargo!

[Cargo](https://crates.io/)は、**Rustaceans** が使用するRustのプロジェクトを管理するためのツールです。　　
Cargoは現在、Rustのようにalpha版で、まだ開発中です。しかし、すでに多くのプロジェクトでされるのに十分です。  
そして大抵のRustのプロジェクトは最初からCargoを使用することを想定しています。　　

Cargoは次の３つの管理を行います。  
コードのビルド、依存関係のダウンロード、そして依存しているプロジェクトのビルドです。  
はじめ、あなたのプログラムは何の依存関係もありません。よって、先ほど上げた機能の最初の一つだけを使用します。  
そのうち、たくさん依存関係を追加していきます。最初からCargoをしていれば、追加するのはとても簡単です。　　

もしあなたが、公式のインストーラー(スクリプト)を使用してRustをインストールしていたら、すでにCargoもインストールされています。  
もし別の方法でインストールをしていたら、[CargoのREADME](https://github.com/rust-lang/cargo#installing-cargo-from-nightlies)を確認してください。  

それではHello WorldをCargoプロジェクトに変換してきましょう。

私達のプロジェクトをCargo化するためには、２つしなければいけないことがあります。  
`Cargo.toml`という設定ファイルを作ること、そしてファイルを正しい位置に配置することです。  
まずは最初の作業を行いましょう。  

    $ mkdir src
    $ mv main.rs src/main.rs

Cargoはソースファイルが`src`ディレクトリの中にあることを想定します。  
READMEやライセンスなどあなたのコードに関係しないものは残しておきます。  
Cargoは、私達のプロジェクトを綺麗で素敵なままに保つお手伝いをします。  
**何物にも相応の場所があり、何物もその場所にあるべし**

次は設定ファイルです。  

  $ editor Cargo.toml

正しい名前か確認して下さい。大文字の`C`ですよ！  
中にはこれを書いてください。  

    [package]

    name = "hello_world"
    version = "0.0.1"
    authors = [ "Your name <you@example.com>" ]

    [[bin]]

    name = "hello_world"

このファイルは[TOML](https://github.com/toml-lang/toml)フォーマットです。  
TOMLについて簡単な説明をしましょう。  

[TOMLノススメ](http://mojavy.com/blog/2013/04/26/toml/)から引用させていただきました。

> Tom's Obvious, Minimal Language (TOML) とはgithubの中の人が提案している設定ファイルのためのミニ言語で、以下のような特徴があります。
> - 人間が読み書きしやすい
> - 標準的なデータ型が利用できる
> - 曖昧さが発生する余地が極力排除されている
> - パーサをかくのが簡単

TOMLはINIにとても良く似ていますが、いくつかのいいところがあります。  

とにかく、ファイルには２つのテーブルがありますね。`package`と`bin`です。  
最初にあなたのパッケージのメタデータをCargoに伝えます。  
次にCargoにバイナリをビルドする(ライブラリを構築することもできます)ということと名前を伝えます。

ファイルを作成したら、ビルドする準備が整いました!
試してみましょう。  

    $ cargo build
       Compiling hello_world v0.0.1 (file:///home/yourname/projects/hello_world)
    $ ./target/hello_world
    Hello, World!

バーン:boom:  
私達は`cargo build`でビルドをして、`./target/hello_world`で実行しました。  
`rustc`のほうがシンプルでしたが、まだファイルが１つしかないからです。もっとファイルが増えたら、  
`rustc`コマンドに複数のファイルをビルドするオプションを渡して、何度も`rustc`を使う必要が出てきます。  
Cargoを使えば、私達のプロジェクトが成長しても`cargo build`だけでビルドすることができます。  

`Cargo.lock`という新しいファイルが作成されたことにも注目しましょう。

    [root]
    name = "hello_world"
    version = "0.0.1"

このファイルはあなたのアプリケーションの依存関係を追跡するために使われます。  
いまはなにもないので、ほとんど何も書いていないです。このファイルはCargoが扱うので、  
あなたがこのファイルを編集する必要はありません。  

これで無事`hello_world`をCargoでビルド出来ました。  
私達のプログラムはとてもシンプルですが、実際にRustのプログラミングでずっと使用していくツールを使っています。  

ツールの話はそろそろ終わりにして、Rust言語自体について学んでいきましょう。  
Rustを使用する時間を通してよく役立つ基本になります。

